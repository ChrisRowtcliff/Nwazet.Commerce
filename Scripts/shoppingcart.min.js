jQuery(function(n){var t=n(".shopping-cart-container"),u=function(n){return function(t){return o(t.closest("form"))===1&&f()&&(localStorage["nwazet.cart"]=""),t.closest(n).find("input.quantity").val(0).closest("form")}},i=function(i){return i&&i.length>0&&(t.load(i[0].action||c,i.serializeArray(),r),n(this).trigger("nwazet.cartupdating")),!1},f=function(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}},h=function(t,i){return n.each(t,function(t,r){t!=="__RequestVerificationToken"&&i.append(n("<input type='hidden'/>").attr("name",t).val(r))}),i},e=function(t){n("#shopping-cart-notification").html(t).show(),console.log(t)},r=function(r,u){var a,o,y,c,v,p,s;n("#shopping-cart-notification").hide(),u==="error"?e(window.Nwazet.FailedToLoadCart):(a=r===!1||typeof r=="string"&&n.trim(r).length>0,f()&&(a?(o=t.find("form"),o.length===0&&(o=t.closest("form")),o.length!==0&&o[0].length>1&&(y=o.serializeArray(),c={},n.each(y,function(n,t){c[t.name]=t.value}),delete c.__RequestVerificationToken,localStorage["nwazet.cart"]=JSON.stringify(c))):(v=localStorage["nwazet.cart"],v&&(p=JSON.parse(v),s=t.closest("form"),s.length===0&&(s=n("<form><\/form>").append(n("<input name='__RequestVerificationToken'/>").val(l))),h(p,s),e(window.Nwazet.WaitWhileWeRestoreYourCart),t.hasClass("minicart")?i(s):t.closest("form").submit()))),t.hasClass("minicart")&&t.parent().toggle(a),n(this).trigger("nwazet.cartupdated"))},o=function(t){var i=-1,r;return t&&(r=t.serializeArray(),n.each(r,function(){var n=this.name;n.substr(0,6)==="items["&&n.slice(-11)==="].ProductId"&&(i=Math.max(i,+n.slice(6,n.length-11)))}),i++),i},s=t.data("load"),c=t.data("update"),l=t.data("token");s?t.load(s,r).parent().hide():r(t.data("got-cart")===!1);n(document).on("click",".shoppingcart .delete",function(){n(this).trigger("nwazet.removefromcart"),u("tr")(n(this)).submit()}).on("click",".minicart .delete",function(){return n(this).trigger("nwazet.removefromcart"),i(u("li")(n(this)))}).on("click",".minicart .update-button",function(){return i(n(this).closest("form"))}).on("submit","form.addtocart",function(r){n(this).trigger("nwazet.addtocart"),r.preventDefault();var f=n(this),h=f.serializeArray(),u=t.find("form"),c=f.data("productid"),l=f.find('input[name="quantity"]').val(),e='<input type="hidden"/>',a=o(u),v=0,s="items["+a+"].";u.length!==0?(u.append(n(e).attr({name:s+"ProductId",value:c})).append(n(e).attr({name:s+"Quantity",value:l})),n.each(h,function(){var t=this.name,f,i,r;t.substr(0,18)==="productattributes["&&t.slice(-5)==="].Key"&&(f=t.slice(18,t.length-5),i=n.grep(h,function(n){return n.name==="productattributes["+f+"].Value"})[0].value,i!=="__none__"&&(r=s+"AttributeIdsToValues["+v+++"].",u.append(n(e).attr({name:r+"Key",value:this.value})).append(n(e).attr({name:r+"Value",value:i}))))}),i(u)):i(f)})});
//@ sourceMappingURL=shoppingcart.min.js.map