jQuery(function(n){var u=!1,i="nwazet.cart",t=n(".shopping-cart-container"),e=function(n){return function(t){return h(t.closest("form"))===1&&o()&&localStorage.removeItem(i),t.closest(n).find("input.quantity").val(0).closest("form")}},r=function(i){return!u&&i&&i.length>0&&(u=!0,t.load(i[0].action||a,i.serializeArray(),f),n(this).trigger("nwazet.cartupdating")),!1},o=function(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}},l=function(t,i){return n.each(t,function(t,r){t!=="__RequestVerificationToken"&&i.append(n("<input type='hidden'/>").attr("name",t).val(r))}),i},s=function(t){n("#shopping-cart-notification").html(t).show();console.log(t)},f=function(f,e){var y,h,w,a,b,p,c;if(n("#shopping-cart-notification").hide(),e==="error")s(window.Nwazet.FailedToLoadCart);else{if(y=f===!1||typeof f=="string"&&n.trim(f).length>0,o())if(y)h=t.find("form"),h.length===0&&(h=t.closest("form")),h.length!==0&&h[0].length>1&&(w=h.serializeArray(),a={},n.each(w,function(n,t){a[t.name]=t.value}),delete a.__RequestVerificationToken,localStorage[i]=JSON.stringify(a)),u=!1;else if(p=localStorage[i],p){u&&(localStorage[i]=JSON.stringify({Country:localStorage[i].Country||null,ZipCode:localStorage[i].ZipCode||null}));try{b=JSON.parse(p)}catch(k){localStorage.removeItem(i);return}c=t.closest("form");c.length===0&&(c=n("<form><\/form>").append(n("<input name='__RequestVerificationToken'/>").val(v)));l(b,c);s(window.Nwazet.WaitWhileWeRestoreYourCart);t.hasClass("minicart")?r(c):t.closest("form").submit()}t.hasClass("minicart")&&t.parent().toggle(y);n(this).trigger("nwazet.cartupdated")}},h=function(t){var i=-1,r;return t&&(r=t.serializeArray(),n.each(r,function(){var n=this.name;n.substr(0,6)==="items["&&n.slice(-11)==="].ProductId"&&(i=Math.max(i,+n.slice(6,n.length-11)))}),i++),i},c=t.data("load"),a=t.data("update"),v=t.data("token");c?t.load(c,f).parent().hide():f(t.data("got-cart")===!1);n(document).on("click",".shoppingcart .delete",function(){n(this).trigger("nwazet.removefromcart");e("tr,li")(n(this)).submit()}).on("click",".minicart .delete",function(){return n(this).trigger("nwazet.removefromcart"),r(e("tr,li")(n(this)))}).on("click",".minicart .update-button",function(){return r(n(this).closest("form"))}).on("submit","form.addtocart",function(i){n(this).trigger("nwazet.addtocart");i.preventDefault();var f=n(this),s=f.serializeArray(),u=t.find("form"),c=f.data("productid"),l=f.find('input[name="quantity"]').val(),e='<input type="hidden"/>',a=h(u),v=0,o="items["+a+"].";u.length!==0?(u.append(n(e).attr({name:o+"ProductId",value:c})).append(n(e).attr({name:o+"Quantity",value:l})),n.each(s,function(){var t=this.name;if(t.substr(0,19)==="productattributes.a"){var r=t.substr(19),f=this.value,i=o+"AttributeIdsToValues["+v+++"].";u.append(n(e).attr({name:i+"Key",value:r})).append(n(e).attr({name:i+"Value",value:f}))}}),r(u)):r(f);n(this).trigger("nwazet.addedtocart")})});
/*
//# sourceMappingURL=shoppingcart.min.js.map
*/