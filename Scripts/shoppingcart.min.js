jQuery(function(n){var f=function(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}},r=function(n){return f()&&(localStorage["nwazet-cart-loading"]=!!n),e=!!n},e=f()?localStorage["nwazet-cart-loading"]=="true":!1,i="nwazet.cart",t=n(".shopping-cart-container"),s=function(n){return function(t){return c(t.closest("form"))===1&&f()&&localStorage.removeItem(i),t.closest(n).find("input.quantity").val(0).closest("form")}},u=function(i){return!e&&i&&i.length>0&&(r(!0),t.load(i[0].action||v,i.serializeArray(),o),n(this).trigger("nwazet.cartupdating")),!1},a=function(t,i){return n.each(t,function(t,r){t!=="__RequestVerificationToken"&&i.append(n("<input type='hidden'/>").attr("name",t).val(r))}),i},h=function(t){n("#shopping-cart-notification").html(t).show();console.log(t)},o=function(o,s){var p,c,b,v,k,w,l;if(n("#shopping-cart-notification").hide(),s==="error")h(window.Nwazet.FailedToLoadCart);else{if(p=o===!1||typeof o=="string"&&n.trim(o).length>0,f())if(p)c=t.find("form"),c.length===0&&(c=t.closest("form")),c.length!==0&&c[0].length>1&&(b=c.serializeArray(),v={},n.each(b,function(n,t){v[t.name]=t.value}),delete v.__RequestVerificationToken,localStorage[i]=JSON.stringify(v)),r(!1);else if(w=localStorage[i],w){if(e){localStorage[i]=JSON.stringify({Country:localStorage[i].Country||null,ZipCode:localStorage[i].ZipCode||null});r(!1);return}try{k=JSON.parse(w)}catch(d){localStorage.removeItem(i);return}if(l=t.closest("form"),l.length===0&&(l=n("<form><\/form>").append(n("<input name='__RequestVerificationToken'/>").val(y))),a(k,l),h(window.Nwazet.WaitWhileWeRestoreYourCart),t.hasClass("minicart"))u(l);else{r(!0);t.closest("form").submit();return}}t.hasClass("minicart")?t.parent().toggle(p):r(!1);n(this).trigger("nwazet.cartupdated")}},c=function(t){var i=-1,r;return t&&(r=t.serializeArray(),n.each(r,function(){var n=this.name;n.substr(0,6)==="items["&&n.slice(-11)==="].ProductId"&&(i=Math.max(i,+n.slice(6,n.length-11)))}),i++),i},l=t.data("load"),v=t.data("update"),y=t.data("token");l?t.load(l,o).parent().hide():o(t.data("got-cart")===!1);n(document).on("click",".shoppingcart .delete",function(){n(this).trigger("nwazet.removefromcart");s("tr,li")(n(this)).submit()}).on("click",".minicart .delete",function(){return n(this).trigger("nwazet.removefromcart"),u(s("tr,li")(n(this)))}).on("click",".minicart .update-button",function(){return u(n(this).closest("form"))}).on("submit","form.addtocart",function(i){var h,l,a,o;n(this).trigger("nwazet.addtocart");i.preventDefault();var e=n(this),v=e.serializeArray(),r=t.find("form"),y=e.data("productid"),p=e.find('input[name="quantity"]').val(),f='<input type="hidden"/>',w=c(r),b=0,s="items["+w+"].";r.length!==0?(r.append(n(f).attr({name:s+"ProductId",value:y})).append(n(f).attr({name:s+"Quantity",value:p})),n.each(v,function(){var n=this.name;n.substr(0,19)==="productattributes.a"&&(h=n.substr(19),l=this.value,a="testing",o=s+"AttributeIdsToValues["+b+++"].");n.substr(0,25)==="ext.productattributes.a"&&(a=this.value)}),h&&l&&r.append(n(f).attr({name:o+"Key",value:h})).append(n(f).attr({name:o+"Value.Value",value:l})).append(n(f).attr({name:o+"Value.ExtendedValue",value:a})),u(r)):u(e);n(this).trigger("nwazet.addedtocart")})});
/*
//# sourceMappingURL=shoppingcart.min.js.map
*/